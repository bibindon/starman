# starman

## 同人ゲーム「ホシマン」

* C++とDirectX9

* 2025年8月13日完成目標

* シングルトンは悪いものらしい。理屈はわかったが実感・体験したことがないのでシングルトンを使いまくって体験してみようと思う。
  * 特に問題とならなかった。

* XXXManagerという命名が悪いという説。
  * XXXManagerという名前のクラスがどれだけあっても問題なかった。むしろXXXManager以外だと読みづらい。

* shared_ptrを長らく使ってきたがありがたみが分からないので使わずに開発してみる。
  * なくても困らなかった。むしろshared_ptrを使うと、swap関数とか使う必要があったり、解放が行われる位置を推理しないといけなくて面倒だった。

* 波括弧による初期化
  * ひたすら面倒くさい。書きづらいし読みづらい。要らない。

* C++スタイルのキャスト
  * 役に立った試しがない。書きづらくて読みづらい。意味ない。

* 継承は悪いものという噂である。継承なしで開発してみる。
  * 無理だった。無理だと思ったくらいのタイミングで使えばよい。

* テストコードを書くと良い、とよく聞く。テストコードを書いたことが沢山あるが、効果を実感できたことがない。しばらく書かずに開発してみる。
  * 内容によってはテストコードが絶大な威力を発揮した。整備されたテストコードが重要の時もあるし、使い捨てのいい加減なテストコードで良いときもあった。テストコードを書かずに動かしたほうが良いときもあった。


* Steamで無料で公開したい

https://github.com/user-attachments/assets/9df02635-b664-4206-9c27-c814e9572046

* 気付いたこと
  * Finalize関数とデストラクタが両方あったほうがいい。
Finalize関数とデストラクタが両方あると、
Finalize関数の呼び忘れというデメリットがあるが、それでもあったほうがいい。
vector::push_back関数を呼ぶだけでも簡単にポインターのコピーは発生する。
ポインターがコピーされた場合、解放処理は最後に一度だけ行わなければならない。
コピーコンストラクタやムーブ関数で対応できるが、書きづらく読みづらく面倒。
クラスの使用者も気を付けないといけないことが発生する。
Finalize関数を呼ぶようにしたほうが簡単。

* なんでもかんでもとにかく例外を飛ばすようにしたほうがいい。

例外を飛ばしまくるソフトはすぐにソフトが落ちてしまうが
そのほうが結果的には早くちゃんと動くようになる。

* WiX ToolSetをインストールする必要がある
https://wixtoolset.org/releases/v3.11/stable

* Rendererというクラスを作って、描画をRendererクラスだけが行うようにすればもっとよかった。
